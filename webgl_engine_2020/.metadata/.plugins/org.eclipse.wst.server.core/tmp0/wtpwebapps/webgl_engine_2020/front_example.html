<html>
<head>

<script type="text/javascript" 	src="./interface.jsp?function_name=construct_render_object"></script>
<script type="text/javascript">

var render;
function body_onload()
{
	construct_render_object(
		document.getElementById("my_canvas"),		//绘图画布
		"NoName",									//用户名
		"NoPassword",								//用户密码
		"chinese",									//语言
		"cad",										//场景名称
		"",											//连接名称,用于多人协同操作一个场景
		[											//初始化参数
			["sub_directory",			"A159-SR-302A"	],		//显示内容
			["coordinate",				"location.xyz.txt"	],	//坐标系选择
			["change_part",				""],	//part换名
			["change_component",		""					],	//component换名
			["part_type",				""					],	//part类型
			["max_loading_number",		10					]	//同时下载数量
		],
		function(my_render)					//创建场景成功后执行的函数
		{
			render=my_render;				//把场景变量保存到变量render中
			document.title=render.title;	//设置网页标题
			
			render.system_call_processor.show_hide_component(false,"camera_operation_component");
			render.system_call_processor.show_hide_component(false,"caption_component");
			
			render.system_call_processor.turnonoff_level_of_detail(false,false);
		},
		function(							//进度条绘制函数，如果不配置该函数，则使用系统内部提供的默认进度条绘制函数
				process_bar_canvas,				//绘制进度条的画布canvas
				progress_bar_ctx,				//绘制进度条的2D上下文
				process_bar_caption,			//进度条当前进度标题，该标题和语言有关，目前系统中仅仅配置了中文和英文相关标题
				progress_bar_value,				//进度条当前进度，取值范围0.00~1.00
				process_bar_time_length,		//进度条当前进度经过的时间，单位是毫秒
				process_bar_engine_time_length,	//进度条所有进度经过的时间，单位是毫秒
				time_unit)						//和语言有关时间单位标题，比如中文是秒，英文是second
		{
			var p_separator=Math.round(process_bar_canvas.width*progress_bar_value);
			progress_bar_ctx.fillStyle="rgb(127,127,127)";
			progress_bar_ctx.fillRect(0,			0,	p_separator,				process_bar_canvas.height);
			progress_bar_ctx.fillStyle="rgb(255,255,255)";
			progress_bar_ctx.fillRect(p_separator,	0,	process_bar_canvas.width,	process_bar_canvas.height);
			
			if((progress_bar_value=(Math.round(1000.0*progress_bar_value)/10.0).toString()).indexOf(".")<0)
				progress_bar_value+=".0";
			var display_value=process_bar_caption+":"+progress_bar_value+"%,";
			display_value+=(Math.round(process_bar_time_length/1000.0)).toString()+time_unit+",";
			display_value+=(Math.round(process_bar_engine_time_length/1000.0)).toString()+time_unit;
			
			progress_bar_ctx.font			="bold 48px Arial";
			progress_bar_ctx.textBaseline	="middle";
			progress_bar_ctx.fillStyle		="rgb(192,192,192)";
			progress_bar_ctx.textAlign		="center";		
			progress_bar_ctx.fillText(display_value,process_bar_canvas.width/2.0,process_bar_canvas.height/2.0);
		}
	);
}

function body_onunload()
{
	if(typeof(render)=="object")
		if(render!=null)
			if(typeof(render.terminate)=="function")
				render.terminate();
}

</script>
</head>

<body onload="body_onload();" onunload="body_onunload();">
<canvas id="my_canvas"	tabindex="0" width=1000	 height=500></canvas>
</body>

</html>
