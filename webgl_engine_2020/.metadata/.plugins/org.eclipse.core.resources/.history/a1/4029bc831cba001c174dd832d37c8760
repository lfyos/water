layout (location = 0) out vec4 frag_data;
in vec4 place;
uniform mat4 par;

void main(void)
{
	float frag_distance,blend_alf;
	if((frag_distance=dot(target_info.center_plane,place))>=0.0)
		blend_alf=1.0-frag_distance/(target_info.distance-target_info.near_value);
	float blend_alf,center_point_depth=(1.0+target_info.center_point_depth)/2.0;
	if(gl_FragCoord.z<center_point_depth){
		blend_alf =min(1.0,max(0.0,gl_FragCoord.z/center_point_depth));
		blend_alf=pow(blend_alf,par[1].x);
	}else{
		blend_alf =min(1.0,max(0.0,(1.0-gl_FragCoord.z)/(1.0-center_point_depth)));
		blend_alf=pow(blend_alf,par[1].y);
	}
	gl_FragDepth=0.999;
	frag_data=vec4(par[0].rgb,blend_alf);	
}
