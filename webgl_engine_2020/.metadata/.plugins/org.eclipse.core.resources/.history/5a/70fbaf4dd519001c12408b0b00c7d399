<html>
<head>

<script type="text/javascript" 	src="./interface.jsp?function_name=construct_render_object"></script>
<script type="text/javascript">

var render;
function body_onload()
{

//	document.oncontextmenu = function(){return false;}

	construct_render_object(
		document.getElementById("my_canvas"),		//绘图画布
		"NoName",									//用户名
		"NoPassword",								//用户密码
		"chinese",									//语言
		"",											//场景名称
		"",											//连接名称,用于多人协同操作一个场景
		[											//初始化参数
			["change_part",				""	],						//part换名
			["change_component",		""	],						//component换名
			["part_type",				""	],						//part类型
			["max_loading_number",		1	]						//同时下载数量
		],
		function(my_render)					//创建场景成功后执行的函数
		{
			render=my_render;				//把场景变量保存到变量render中
			construct_render_object(
					document.getElementById("my_canvas"),		//绘图画布
					"NoName",									//用户名
					"NoPassword",								//用户密码
					"chinese",									//语言
					"cad",										//场景名称
					"",											//连接名称,用于多人协同操作一个场景
					[											//初始化参数
						["sub_directory",			"1080-PA-601-3D"],			//显示内容
						["coordinate",				"location.xyz.txt"],		//坐标系选择
						["change_part",				""	],						//part换名
						["change_component",		""	],						//component换名
						["part_type",				""	],						//part类型
						["max_loading_number",		10	]						//同时下载数量
					],
					function(my_render)					//创建场景成功后执行的函数
					{
						render.terminate();
						render=my_render;				//把场景变量保存到变量render中
						document.title=render.title;	//设置网页标题
					},
					
					1000,								//更新进度条的时间间隔,单位：毫秒。
					true,								//创建场景完毕后是否停止更新进度条,true：停止更新,false：继续更新。
					
					function(								//更新进度条时执行的函数,四个输入参数。
															//函数返回值为真,则下一个时间单位再次更新进度条,函数返回值为假,则不再更新进度条。
							process_bar_caption,			//更新进度条时显示的信息：该信息和语言相关,采用不同的语言（english、chinese）,显示信息是不一样的。
							process_bar_title,				//更新进度条时显示的信息：该信息和语言无关,采用不同的语言（english、chinese）,显示信息是一样的。
							process_bar_current,			//进度条的当前取值
							process_bar_max,				//进度条的最大取值
							process_bar_time_length,		//当前步骤经过的时间,单位：毫秒。
							process_bar_engine_time_length,	//从开始创建场景经过的时间,单位：毫秒。
							process_bar_id)					//进度条的ID
					{
						console.log(process_bar_caption				+"	:	"+
									process_bar_title				+"	:	"+
									process_bar_current				+"	:	"+
									process_bar_max					+"	:	"+
									process_bar_time_length			+"	:	"+
									process_bar_engine_time_length	+"	:	"+
									process_bar_id);
						
						return true;					//函数返回值为真,则下一个时间单位再次更新进度条。
					}
				);
		});
}

function body_onunload()
{
	if(typeof(render)=="object")
		if(render!=null)
			if(typeof(render.terminate)=="function")
				render.terminate();
}

</script>
</head>

<body onload="body_onload();" onunload="body_onunload();">
<canvas id="my_canvas"	tabindex="0" width=1000	 height=500></canvas>
</body>

</html>
