
in vec4 vertex_location,vertex_normal;
out vec3 direction;

void main(void)
{
	vec4 eye=target_info.eye_point;
	vec4 p0=component_info.model_matrix*vec4(vertex_location.xyz/500.0,1.0);
	vec4 pn=component_info.model_matrix*vec4(vertex_normal.xyz+vertex_location.xyz/500.0,1.0);
	p0=p0/p0.w;
	pn=pn/pn.w;
	direction=normalize(reflect(normalize(p0.xyz-eye.xyz),normalize(pn.xyz-p0.xyz)));
	gl_Position=target_info.projection_matrix*p0;
}