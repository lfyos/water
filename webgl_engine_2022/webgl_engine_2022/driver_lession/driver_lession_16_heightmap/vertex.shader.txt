uniform sampler2D heightmap_sampler;
uniform vec4 model_scale,texture_scale;

in  vec4 vertex_location;

out vec4 frag_texture;

void main(void)
{
	frag_texture=vertex_location*texture_scale;
	
	gl_Position=vec4(vertex_location.xy,
		texture(heightmap_sampler,vertex_location.xy).x,1.0);
	gl_Position=vec4(gl_Position.y,gl_Position.z,gl_Position.x,gl_Position.w);
	gl_Position.xyz*=model_scale.xyz;
	gl_Position=component_info.model_matrix*gl_Position;
	gl_Position=target_info.projection_matrix*gl_Position;
}
