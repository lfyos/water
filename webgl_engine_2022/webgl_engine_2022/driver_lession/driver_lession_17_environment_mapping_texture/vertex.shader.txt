in  vec4 vertex_location,vertex_normal;

out vec3 direction;

void main(void)
{
	vec4 p0=component_info.model_matrix*vec4(vertex_location.xyz,1.0);
	vec4 pn=component_info.model_matrix*vec4(vertex_location.xyz+vertex_normal.xyz,1.0);
	vec4 eye=target_info.eye_point;
	
	gl_Position=target_info.projection_matrix*p0;

	p0/=p0.w;
	pn/=pn.w;
	eye/=eye.w;
	
	direction=normalize(reflect(normalize((p0-eye).xyz),normalize((pn-p0).xyz)));
	
	return;
}
