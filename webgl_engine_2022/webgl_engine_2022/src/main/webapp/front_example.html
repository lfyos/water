<html>
<head>

<script type="text/javascript"
	src="./interface.jsp?function_name=construct_render_object"></script>
<script type="text/javascript">

var lfy_render;
function body_onload()
{
	construct_render_object(
		"my_canvas",		//Object���͵Ļ�ͼ�����������String����,��ϵͳʹ��document.getElementById("my_canvas")����ת��ΪObject�������ݡ�
		"NoName",			//�û���
		"NoPassword",		//�û�����
		"chinese",			//����
		"cad",				//��������
		"",					//��������,���ڶ���Эͬ����һ������
		[					//��ʼ������
			["change_part",				""					],	//part����
			["change_component",		""					],	//component����
			["part_type",				""					],	//part����
			["max_loading_number",		10					],	//ͬʱ��������
			["sub_directory",			"A159-SR-302A"		],	//��ʾ����
			["coordinate",				"location.xyz.txt"	]	//����ϵѡ��
		],
		function(my_render)	//���������ɹ���ִ�еĺ���
		{
			lfy_render=my_render;				//�ѳ����������浽����render��
			document.title=lfy_render.title;	//������ҳ����
		},
		function(			//���������ƺ�������������øú�������ʹ��ϵͳ�ڲ��ṩ��Ĭ�Ͻ��������ƺ���
				process_bar_canvas,				//���ƽ������Ļ���canvas
				progress_bar_ctx,				//���ƽ�������2D������
				process_bar_caption,			//��������ǰ���ȱ��⣬�ñ���������йأ�Ŀǰϵͳ�н������������ĺ�Ӣ����ر���
				progress_bar_value,				//��������ǰ���ȣ�ȡֵ��Χ0.00~1.00
				process_bar_time_length,		//��������ǰ���Ⱦ�����ʱ�䣬��λ�Ǻ���
				process_bar_engine_time_length,	//���������н��Ⱦ�����ʱ�䣬��λ�Ǻ���
				time_unit)						//�������й�ʱ�䵥λ���⣬�����������룬Ӣ����second
		{
			var p_separator=Math.round(process_bar_canvas.width*progress_bar_value);
			progress_bar_ctx.fillStyle="rgb(127,127,127)";
			progress_bar_ctx.fillRect(0,			0,	p_separator,				process_bar_canvas.height);
			progress_bar_ctx.fillStyle="rgb(255,255,255)";
			progress_bar_ctx.fillRect(p_separator,	0,	process_bar_canvas.width,	process_bar_canvas.height);
			
			if((progress_bar_value=(Math.round(1000.0*progress_bar_value)/10.0).toString()).indexOf(".")<0)
				progress_bar_value+=".0";
			var display_value=process_bar_caption+":"+progress_bar_value+"%,";
			display_value+=(Math.round(process_bar_time_length/1000.0)).toString()+time_unit+",";
			display_value+=(Math.round(process_bar_engine_time_length/1000.0)).toString()+time_unit;
			
			progress_bar_ctx.font			="bold 48px Arial";
			progress_bar_ctx.textBaseline	="middle";
			progress_bar_ctx.fillStyle		="rgb(192,192,192)";
			progress_bar_ctx.textAlign		="center";		
			progress_bar_ctx.fillText(display_value,process_bar_canvas.width*0.5,process_bar_canvas.height*0.5);
		});
}

function body_onunload()
{
	if(typeof(lfy_render)=="object")
		if(lfy_render!=null)
			if(typeof(lfy_render.terminate)=="function")
				lfy_render.terminate();
}

</script>
</head>

<body onload="body_onload();" onunload="body_onunload();">
	<canvas id="my_canvas" tabindex="0" width=1000 height=500></canvas>
</body>

</html>
